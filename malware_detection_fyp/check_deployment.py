#!/usr/bin/env python3
"""
Deployment check script for CyberShield AI
"""

import sys
import os

def check_dependencies():
    """Check if all required dependencies are available"""
    try:
        import flask
        print(f"✓ Flask: {flask.__version__}")
    except ImportError:
        print("✗ Flask not found")
        return False
    
    try:
        import tensorflow as tf
        print(f"✓ TensorFlow: {tf.__version__}")
    except ImportError:
        print("✗ TensorFlow not found")
        return False
    
    try:
        import cv2
        print(f"✓ OpenCV: {cv2.__version__}")
    except ImportError:
        print("✗ OpenCV not found")
        return False
    
    try:
        import numpy as np
        print(f"✓ NumPy: {np.__version__}")
    except ImportError:
        print("✗ NumPy not found")
        return False
    
    try:
        import PIL
        print(f"✓ Pillow: {PIL.__version__}")
    except ImportError:
        print("✗ Pillow not found")
        return False
    
    return True

def check_model():
    """Check if model files exist"""
    models_dir = "models"
    if not os.path.exists(models_dir):
        print("✗ Models directory not found")
        return False
    
    model_files = [f for f in os.listdir(models_dir) if f.endswith('.keras')]
    if not model_files:
        print("✗ No .keras model files found")
        return False
    
    print(f"✓ Found {len(model_files)} model file(s)")
    for model in model_files:
        print(f"  - {model}")
    
    return True

def main():
    print("CyberShield AI Deployment Check")
    print("=" * 40)
    
    deps_ok = check_dependencies()
    model_ok = check_model()
    
    print("\n" + "=" * 40)
    if deps_ok and model_ok:
        print("✓ All checks passed! Ready for deployment.")
        sys.exit(0)
    else:
        print("✗ Some checks failed. Please fix issues before deployment.")
        sys.exit(1)

if __name__ == "__main__":
    main()